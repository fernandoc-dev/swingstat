#!/bin/bash

echo ""
echo "â“ Do you want to update dependencies?"
echo "  1) Yes"
echo "  2) No"
read -p "Select an option [1-2]: " update_choice

if [ "$update_choice" == "1" ]; then
  echo "ğŸ”„ Cleaning old dependencies..."
  rm -rf node_modules package-lock.json

  echo "ğŸ§¹ Cleaning npm cache..."
  npm cache clean --force

  echo "ğŸ“¦ Installing dependencies from package.json..."
  npm install
elif [ "$update_choice" == "2" ]; then
  echo "â© Skipping dependency update."
else
  echo "âŒ Invalid option. Exiting."
  exit 1
fi

echo ""
echo "â“ How do you want to run the project?"
echo "  1) Development (npm start)"
echo "  2) Production-like (npm run build + npx serve)"
read -p "Select an option [1-2]: " run_choice

if [ "$run_choice" == "1" ]; then
  echo "ğŸš€ Starting in development mode..."
  npm start
elif [ "$run_choice" == "2" ]; then
  echo "ğŸ› ï¸ Building the app..."
  npm run build
  echo "ğŸ“¡ Serving the production build on http://localhost:3000 ..."
  npx serve -s build -l 3000
else
  echo "âŒ Invalid option. Exiting."
  exit 1
fi
